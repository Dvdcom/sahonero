<% if (rol == 'Usuario' || rol == 'Super-Admin') { %>
    <div class="container-fluid mt-4 mx-auto">
        <div class="row mx-3">
            <div class="col-12">
                <h1>Todos los registros</h1>
                <p>Como usuario podras ver todos los registros creados.</p>
            </div>
        </div>
    </div>
<%}%>

<% if (rol == 'Admin') { %>
    <div class="container-fluid mt-4 mx-auto">
        <div class="row mx-3">
            <div class="col-12">
                <h1>Tus registros</h1>
                <p>Como admin solo podras ver los registros creados por ti.</p>
            </div>
        </div>
    </div>
<%}%>

<div class="container-fluid mt-2 table-responsive">
    <div class="row">
        <div class="col-12">
            <table class="table table-striped table-hover align-middle" style="white-space: nowrap; overflow-x: auto;">
                <thead>
                    <tr class="table-primary">
                        <th>Fecha</th>
                        <th><i class="bi bi-eye me-2 me-1" id="fcolumn"></i>Usuario</th>
                        <th><i class="bi bi-eye me-2 me-1" id="fcolumn"></i>Tipo</th>
                        <th><i class="bi bi-eye me-2 me-1" id="fcolumn"></i>OT</th>
                        <th><i class="bi bi-eye me-2 me-1" id="fcolumn"></i>Nombre_Cliente</th>
                        <th><i class="bi bi-eye me-2 me-1" id="fcolumn"></i>Apellido_cliente</th>
                        <th><i class="bi bi-eye me-2 me-1" id="fcolumn"></i>Identificacion</th>
                        <th class="dato-oc">Contrato</th>
                        <th class="dato-oc">Direccion</th>
                        <th class="dato-oc">Telefono</th>
                        <th><i class="bi bi-eye me-2 me-1" id="fcolumn"></i>Equipoi</th>
                        <th><i class="bi bi-eye me-2 me-1" id="fcolumn"></i>Equipor</th>
                        <th class="dato-oc">Comentario</th>
                        <th><i class="bi bi-eye me-2 me-1" id="fcolumn"></i>Estado</th>
                        <th><i class="bi bi-eye me-2 me-1" id="fcolumn"></i>Administrador</th>
                        <th><i class="bi bi-eye me-2 me-1" id="fcolumn"></i>Agregar</th>
                    </tr>
                </thead>
                <tbody>
                    <% registros.forEach(registro => {%>
                    <tr>
                    <% let fecha = registro.fecha;
                        let fechaCompleta = ('0'+fecha.getDate()).slice(-2)+'/'+('0'+fecha.getMonth()).slice(-2)+'/'+fecha.getFullYear();
                        %>
                        <td><%= fechaCompleta%></td>
                        <td><%= registro.usuario %></td>
                        <td><%= registro.tipo %></td>
                        <td><%= registro.ot %></td>
                        <td><%= registro.nombre_cliente %></td>
                        <td><%= registro.apellido_cliente %></td>
                        <td><%= registro.identificacion %></td>
                        <td class="dato-oc"><%= registro.contrato %></td>
                        <td class="dato-oc"><%= registro.direccion %></td>
                        <td class="dato-oc"><%= registro.telefono %></td>
                        <td><%= registro.equipoi %></td>
                        <td><%= registro.equipor %></td>
                        <td class="dato-oc"><%= registro.comentario %></td>
                        <td><%= registro.estado %></td>
                        <td><%= registro.administrador %></td>
                        <td><a href="#" class="btn btn-outline-secondary btn-sm">comentar</a></td>
                    </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
    </div>
</div>
<div class="container-fluid d-flex justify-content-center mb-3">
    <div class="row">
        <div class="col-12">
            <nav aria-label="Page navigation example">
                <ul class="pagination pagination-sm">
                    <% if(page> 1) { %>
                        <li class="page-item">
                            <a class="page-link" href="/mis-registros/?page=<%=page-1%>" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <% } %>
                            <% for(let i=iterator; i <=endingLink; i++) { %>
                                <% if(i===page) { %>
                                    <li class="page-item active" aria-current="page">
                                        <a class="page-link" href="/mis-registros/?page=<%=i%>">
                                            <%=i%>
                                        </a>
                                    </li>
                                    <% continue; %>
                                        <% } %>
                                            <li class="page-item"><a class="page-link"
                                                    href="/mis-registros/?page=<%=i%>">
                                                    <%=i%>
                                                </a></li>
                                            <% } %>
                                                <% if(page < numberOfPages) { %>
                                                    <li class="page-item">
                                                        <a class="page-link" href="/mis-registros/?page=<%=page+1%>"
                                                            aria-label="Next">
                                                            <span aria-hidden="true">&raquo;</span>
                                                        </a>
                                                    </li>
                                                    <% } %>
                </ul>
            </nav>
        </div>
    </div>
</div>


